# Plan: ê²½ë§ˆì—°êµ¬ì†Œ (Horse Lab)

> ë§ˆì‚¬íšŒ/ê²½ë§ˆ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ëµë³„ Top3 ë§ì„ ì¶”ì²œí•˜ëŠ” ëª¨ë°”ì¼ ìµœì í™” ì›¹ ì„œë¹„ìŠ¤

## 1. í”„ë¡œì íŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì„œë¹„ìŠ¤ëª…** | ê²½ë§ˆì—°êµ¬ì†Œ (Horse Lab) |
| **í”Œë«í¼** | ëª¨ë°”ì¼ ìµœì í™” ì›¹ (ë°˜ì‘í˜•, PWA ê°€ëŠ¥) |
| **ê¸°ìˆ  ìŠ¤íƒ** | Next.js 15 (App Router) + Supabase + Paddle |
| **ëª©í‘œ** | "ê°" ëŒ€ì‹  ì „ëµë³„ ê·¼ê±° ìˆëŠ” Top3 ì¶”ì²œ |
| **í•µì‹¬ ê°€ì¹˜** | í•œ í™”ë©´ì—ì„œ ì˜¤ëŠ˜ ê²½ê¸° â†’ ì „ëµë³„ ì¶”ì²œ â†’ ë‚˜ë§Œì˜ í”½ê¹Œì§€ ë¹ ë¥´ê²Œ |

## 2. ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

| ì˜ì—­ | ê¸°ìˆ  | ì„ ì • ì´ìœ  |
|------|------|-----------|
| **Frontend** | Next.js 15 (App Router) | SSR/SSG, SEO, Vercel ë°°í¬ |
| **UI** | Tailwind CSS + shadcn/ui | ëª¨ë°”ì¼ ìš°ì„ , ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ |
| **Backend/DB** | Supabase (PostgreSQL) | Auth, RLS, Edge Functions, Realtime |
| **ì¸ì¦** | Supabase Auth (ì¹´ì¹´ì˜¤ OAuth) | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì „ìš© |
| **ê²°ì œ** | Paddle | ê¸€ë¡œë²Œ êµ¬ë… ê²°ì œ, ì„¸ê¸ˆ ì²˜ë¦¬ ìë™ |
| **ë°°í¬** | Vercel | Next.js ìµœì í™” ë°°í¬, Edge Runtime |
| **ë¶„ì„** | Supabase Edge Functions | ì „ëµë³„ ì ìˆ˜ ì‚°ì • ë¡œì§ |

## 3. ì‚¬ìš©ì ìœ í˜• ë° ì ‘ê·¼ ì •ì±…

### 3.1 ì‚¬ìš©ì ìœ í˜•

| ìœ í˜• | ì ‘ê·¼ ë²”ìœ„ | ë¹„ìš© |
|------|-----------|------|
| **ë¹„íšŒì›** | í™ˆ í™”ë©´ë§Œ ì—´ëŒ (ê²½ê¸° ë¦¬ìŠ¤íŠ¸) | ë¬´ë£Œ |
| **ë¬´ë£Œ íšŒì›** | í•˜ë£¨ 1ê°œ ê²½ê¸° ë¶„ì„ ì—´ëŒ | ë¬´ë£Œ |
| **í”„ë¦¬ë¯¸ì—„ íšŒì›** | ì „ ê²½ê¸° ë¬´ì œí•œ + ë‚˜ë§Œì˜ í”½ | ì›” 8,900ì› |

### 3.2 ë¬´ë£Œ ì‚¬ìš© ì •ì±…

- í•˜ë£¨ 1ê°œ ê²½ê¸° ë¶„ì„ ì—´ëŒ ê°€ëŠ¥
- ë¦¬ì…‹ ê¸°ì¤€: KST 00:00 (UTC+9)
- ë‚˜ë¨¸ì§€ ê²½ê¸°: ë¸”ëŸ¬ ì²˜ë¦¬ + ê²°ì œ CTA í‘œì‹œ
- "ë‚˜ë§Œì˜ í”½" ê¸°ëŠ¥: ìœ ë£Œ ì „ìš©

## 4. í•µì‹¬ ê¸°ëŠ¥

### 4.1 í™ˆ - ì˜¤ëŠ˜ ê²½ê¸° ë¦¬ìŠ¤íŠ¸

- ì˜¤ëŠ˜(KST) ê²½ì£¼ ëª©ë¡ í‘œì‹œ
- ê²½ë§ˆì¥ë³„ êµ¬ë¶„ (ì„œìš¸, ë¶€ì‚°, ì œì£¼)
- ê²½ê¸°ë³„ ê¸°ë³¸ ì •ë³´: ê²½ì£¼ë²ˆí˜¸, ê±°ë¦¬, ì¶œë°œì‹œê°„, ì¶œì „ë§ˆ ìˆ˜
- ë¬´ë£Œ ê²½ê¸° 1ê°œ ë°°ì§€ í‘œì‹œ

### 4.2 ê²½ê¸° ìƒì„¸ - ì „ëµë³„ Top3

4ê°œ ì „ëµì´ ë…ë¦½ì ìœ¼ë¡œ ì ìˆ˜ ì‚°ì •, ê°ê° ìƒìœ„ 3ë§ˆ ì¶œë ¥:

#### ì „ëµ 1: í†µê³„ ê¸°ë°˜ (ìˆ˜í•™/íŒ¨í„´)
- **ì…ë ¥**: ê±°ë¦¬, íŠ¸ë™ ìƒíƒœ, ê²Œì´íŠ¸ ë²ˆí˜¸, ê³¼ê±° ìš°ìŠ¹ íŒ¨í„´
- **ì¶œë ¥**: "ì´ë²ˆ ê²½ê¸° ì¡°ê±´ì—ì„œ ìœ ë¦¬í•œ íŒ¨í„´ì„ ê°€ì§„ ë§ Top3"
- **ì¶”ì²œ ì´ìœ  ì˜ˆì‹œ**:
  - "í•´ë‹¹ ê±°ë¦¬/íŠ¸ë™ì—ì„œ ê²Œì´íŠ¸ ìœ ë¦¬ + ìµœê·¼ íë¦„ ì•ˆì •"
  - "ë™ì¡°ê±´ ìš°ìŠ¹ íŒ¨í„´ ìƒìœ„ê¶Œ"

#### ì „ëµ 2: ìƒí˜¸ ì „ì  ê¸°ë°˜
- **ì…ë ¥**: ì¶œì „ë§ˆ ê°„ ë§ëŒ€ê²° ê¸°ë¡, ë™ì¼ ì¡°ê±´ ë¹„êµ
- **ì¶œë ¥**: "ìƒëŒ€ ëŒ€ë¹„ ìš°ìœ„ê°€ ê°•í•œ ë§ Top3"
- **ì¶”ì²œ ì´ìœ  ì˜ˆì‹œ**:
  - "ë™ì¼ ìƒëŒ€êµ° ëŒ€ë¹„ ìƒìœ„ ê¸°ë¡ ë‹¤ìˆ˜"
  - "ìµœê·¼ ë§ëŒ€ê²° ìš°ìœ„"

#### ì „ëµ 3: ë§-ê¸°ìˆ˜ ê¶í•©
- **ì…ë ¥**: ë§/ê¸°ìˆ˜ ì¡°í•© ìŠ¹ë¥ , ìµœê·¼ í˜¸í¡, ê±°ë¦¬/íŠ¸ë™ ì ì„±
- **ì¶œë ¥**: "ì¡°í•© ì„±ê³¼ê°€ ì¢‹ì€ ë§ Top3"
- **ì¶”ì²œ ì´ìœ  ì˜ˆì‹œ**:
  - "í•´ë‹¹ ê¸°ìˆ˜ì™€ í•¨ê»˜ í–ˆì„ ë•Œ 3ìœ„ ë‚´ ë¹ˆë„ ë†’ìŒ"
  - "ì´ ê±°ë¦¬ì—ì„œ ê¸°ìˆ˜ ì„±ê³¼ ìš°ìˆ˜"

#### ì „ëµ 4: ê±´ê°• ë°ì´í„° ê¸°ë°˜
- **ì…ë ¥**: ì²´ì¤‘ ë³€í™”, íœ´ì‹ ê¸°ê°„, ì»¨ë””ì…˜ ì§€í‘œ, í›ˆë ¨ ê¸°ë¡
- **ì¶œë ¥**: "ì»¨ë””ì…˜ì´ ìµœì ì¸ ë§ Top3"
- **ì¶”ì²œ ì´ìœ  ì˜ˆì‹œ**:
  - "ì ì • ì²´ì¤‘ ë²”ìœ„ + ì¶©ë¶„í•œ íœ´ì‹ í›„ ë³µê·€"
  - "í›ˆë ¨ ê¸°ë¡ ìƒìŠ¹ ì¶”ì„¸"

### 4.3 ë‚˜ë§Œì˜ í”½ (í”„ë¦¬ë¯¸ì—„ ì „ìš©)

- 4ê°œ ì „ëµë³„ ê°€ì¤‘ì¹˜ë¥¼ ì§ì ‘ ì„¤ì •
- ì¢…í•© ì ìˆ˜ ê¸°ë°˜ ìµœì¢… Top3 ìƒì„±
- ê°€ì¤‘ì¹˜ í”„ë¦¬ì…‹ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
- ìµœëŒ€ 3ê°œ í”„ë¦¬ì…‹ ì €ì¥

### 4.4 ì¸ì¦

- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ë§Œ ì œê³µ (Supabase Auth + ì¹´ì¹´ì˜¤ OAuth)
- ìµœì´ˆ ë¡œê·¸ì¸ ì‹œ: ë‹‰ë„¤ì„, í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥
- ì„¸ì…˜ ê´€ë¦¬: Supabase Auth JWT

### 4.5 ê²°ì œ (Paddle êµ¬ë…)

- ìƒí’ˆ: ì›” 8,900ì› (ê²½ë§ˆì—°êµ¬ì†Œ í”„ë¦¬ë¯¸ì—„)
- Paddle Checkout (ì˜¤ë²„ë ˆì´ ë°©ì‹)
- êµ¬ë… ìƒíƒœ ê´€ë¦¬: Paddle Webhook â†’ Supabase
- ìƒíƒœ: active, past_due, cancelled, paused

## 5. í™”ë©´ êµ¬ì„± (ëª¨ë°”ì¼ ì¤‘ì‹¬)

### 5.1 í™”ë©´ ëª©ë¡

| ë²ˆí˜¸ | í™”ë©´ | ê²½ë¡œ | ì ‘ê·¼ ê¶Œí•œ |
|------|------|------|-----------|
| S-01 | í™ˆ (ì˜¤ëŠ˜ ê²½ê¸°) | `/` | ì „ì²´ |
| S-02 | ë¡œê·¸ì¸ | `/login` | ë¹„íšŒì› |
| S-03 | ê²½ê¸° ìƒì„¸ | `/race/[raceId]` | íšŒì› (ë¬´ë£Œ 1ê°œ) |
| S-04 | ë‚˜ë§Œì˜ í”½ | `/race/[raceId]/my-pick` | í”„ë¦¬ë¯¸ì—„ |
| S-05 | êµ¬ë… ê´€ë¦¬ | `/subscription` | íšŒì› |
| S-06 | ë§ˆì´í˜ì´ì§€ | `/mypage` | íšŒì› |
| S-07 | ê´€ë¦¬ì | `/admin` | ê´€ë¦¬ì |

### 5.2 í™”ë©´ ìƒì„¸

#### S-01: í™ˆ (ì˜¤ëŠ˜ ê²½ê¸°)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‡ ê²½ë§ˆì—°êµ¬ì†Œ            â”‚
â”‚  2026.02.28 (í† )         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ì„œìš¸ ê²½ë§ˆê³µì›         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1R | 1200m | 15:00 â”‚  â”‚  â† ë¬´ë£Œ ğŸ†“
â”‚  â”‚ ì¶œì „ë§ˆ 12ë‘         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2R | 1400m | 15:30 â”‚  â”‚  â† ğŸ”’ ë¸”ëŸ¬
â”‚  â”‚ ì¶œì „ë§ˆ 10ë‘         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  ...                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ë¶€ì‚° ê²½ë‚¨ê²½ë§ˆê³µì›     â”‚
â”‚  ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### S-03: ê²½ê¸° ìƒì„¸ (ì „ëµë³„ Top3)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† 1R | ì„œìš¸ 1200m       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [í†µê³„] [ì „ì ] [ê¶í•©] [ê±´ê°•]â”‚  â† íƒ­ ì „í™˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ† í†µê³„ ê¸°ë°˜ Top3       â”‚
â”‚                          â”‚
â”‚  1ï¸âƒ£  ë²ˆí˜¸5 í•´í”¼ëŸ¬ë„ˆ      â”‚
â”‚  ì ìˆ˜: 87.2              â”‚
â”‚  "ê±°ë¦¬Â·íŠ¸ë™ ê²Œì´íŠ¸ ìœ ë¦¬   â”‚
â”‚   + ìµœê·¼ íë¦„ ì•ˆì •"      â”‚
â”‚                          â”‚
â”‚  2ï¸âƒ£  ë²ˆí˜¸3 ìŠ¤íƒ€ë¼ì´íŠ¸    â”‚
â”‚  ì ìˆ˜: 82.5              â”‚
â”‚  "ë™ì¡°ê±´ ìš°ìŠ¹ íŒ¨í„´ ìƒìœ„"  â”‚
â”‚                          â”‚
â”‚  3ï¸âƒ£  ë²ˆí˜¸8 í‚¹ì˜¤ë¸Œí‚¹     â”‚
â”‚  ì ìˆ˜: 79.1              â”‚
â”‚  "ê²Œì´íŠ¸ ìµœì  + ê¸°ìˆ˜ ìƒìŠ¹"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ë‚˜ë§Œì˜ í”½ ë§Œë“¤ê¸° â†’]      â”‚  â† í”„ë¦¬ë¯¸ì—„ CTA
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. ë°ì´í„° ëª¨ë¸ (ì£¼ìš” í…Œì´ë¸”)

### 6.1 Core Tables

```
profiles
â”œâ”€â”€ id (uuid, FK â†’ auth.users)
â”œâ”€â”€ kakao_id (text, unique)
â”œâ”€â”€ nickname (text)
â”œâ”€â”€ avatar_url (text)
â”œâ”€â”€ subscription_status (text: free/premium)
â”œâ”€â”€ free_race_date (date)          -- ë¬´ë£Œ ì—´ëŒí•œ ë‚ ì§œ
â”œâ”€â”€ free_race_id (uuid)            -- ë¬´ë£Œë¡œ ì—´ëŒí•œ ê²½ê¸° ID
â”œâ”€â”€ created_at, updated_at

races
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ race_date (date)
â”œâ”€â”€ race_number (int)
â”œâ”€â”€ venue (text: seoul/busan/jeju)
â”œâ”€â”€ distance (int)
â”œâ”€â”€ track_condition (text)
â”œâ”€â”€ start_time (timestamptz)
â”œâ”€â”€ entries_count (int)
â”œâ”€â”€ status (text: scheduled/completed/cancelled)
â”œâ”€â”€ created_at

horses
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ name (text)
â”œâ”€â”€ age (int)
â”œâ”€â”€ sex (text)
â”œâ”€â”€ weight (numeric)
â”œâ”€â”€ trainer (text)
â”œâ”€â”€ owner (text)
â”œâ”€â”€ created_at

jockeys
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ name (text)
â”œâ”€â”€ win_rate (numeric)
â”œâ”€â”€ created_at

race_entries
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ race_id (uuid, FK â†’ races)
â”œâ”€â”€ horse_id (uuid, FK â†’ horses)
â”œâ”€â”€ jockey_id (uuid, FK â†’ jockeys)
â”œâ”€â”€ gate_number (int)
â”œâ”€â”€ horse_weight (numeric)
â”œâ”€â”€ created_at

race_results
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ race_id (uuid, FK â†’ races)
â”œâ”€â”€ horse_id (uuid, FK â†’ horses)
â”œâ”€â”€ finish_position (int)
â”œâ”€â”€ finish_time (text)
â”œâ”€â”€ created_at

strategy_predictions
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ race_id (uuid, FK â†’ races)
â”œâ”€â”€ strategy_type (text: stats/record/chemistry/health)
â”œâ”€â”€ rank (int: 1-3)
â”œâ”€â”€ horse_id (uuid, FK â†’ horses)
â”œâ”€â”€ score (numeric)
â”œâ”€â”€ reason (text)                   -- ì¶”ì²œ ì´ìœ  ë¬¸êµ¬
â”œâ”€â”€ created_at

user_picks
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ user_id (uuid, FK â†’ profiles)
â”œâ”€â”€ race_id (uuid, FK â†’ races)
â”œâ”€â”€ strategy_weights (jsonb)        -- {stats: 30, record: 25, ...}
â”œâ”€â”€ result_horses (jsonb)           -- [{horse_id, score, rank}]
â”œâ”€â”€ created_at

user_pick_presets
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ user_id (uuid, FK â†’ profiles)
â”œâ”€â”€ name (text)
â”œâ”€â”€ weights (jsonb)
â”œâ”€â”€ created_at

subscriptions
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ user_id (uuid, FK â†’ profiles)
â”œâ”€â”€ paddle_subscription_id (text)
â”œâ”€â”€ paddle_customer_id (text)
â”œâ”€â”€ status (text: active/past_due/cancelled/paused)
â”œâ”€â”€ current_period_start (timestamptz)
â”œâ”€â”€ current_period_end (timestamptz)
â”œâ”€â”€ created_at, updated_at
```

### 6.2 Admin Tables

```
data_sync_logs
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ sync_type (text: races/results/horses)
â”œâ”€â”€ status (text: success/failed)
â”œâ”€â”€ records_count (int)
â”œâ”€â”€ error_message (text)
â”œâ”€â”€ created_at

prediction_logs
â”œâ”€â”€ id (uuid, PK)
â”œâ”€â”€ race_id (uuid, FK â†’ races)
â”œâ”€â”€ strategy_type (text)
â”œâ”€â”€ status (text: success/failed)
â”œâ”€â”€ created_at
```

## 7. API / Edge Functions

### 7.1 Supabase Edge Functions

| í•¨ìˆ˜ëª… | íŠ¸ë¦¬ê±° | ì—­í•  |
|--------|--------|------|
| `sync-race-data` | Cron (ë§¤ì¼ 07:00 KST) | ë§ˆì‚¬íšŒ ë°ì´í„° ìˆ˜ì§‘ â†’ races, horses, jockeys, race_entries ì €ì¥ |
| `run-predictions` | sync ì™„ë£Œ í›„ í˜¸ì¶œ | 4ê°œ ì „ëµ ì ìˆ˜ ì‚°ì • â†’ strategy_predictions ì €ì¥ |
| `paddle-webhook` | Paddle Webhook | êµ¬ë… ìƒíƒœ ë³€ê²½ â†’ subscriptions, profiles ì—…ë°ì´íŠ¸ |

### 7.2 Next.js API Routes

| ê²½ë¡œ | Method | ì—­í•  |
|------|--------|------|
| `/api/auth/kakao` | GET | ì¹´ì¹´ì˜¤ OAuth redirect ì²˜ë¦¬ |
| `/api/auth/callback` | GET | OAuth callback â†’ ì„¸ì…˜ ìƒì„± |
| `/api/race/[id]/my-pick` | POST | ë‚˜ë§Œì˜ í”½ ìƒì„± (ê°€ì¤‘ì¹˜ â†’ ì¢…í•© Top3) |
| `/api/subscription/checkout` | POST | Paddle Checkout ì„¸ì…˜ ìƒì„± |
| `/api/webhook/paddle` | POST | Paddle Webhook ìˆ˜ì‹  |
| `/api/admin/sync` | POST | ìˆ˜ë™ ë°ì´í„° ì‹±í¬ íŠ¸ë¦¬ê±° |

## 8. ë¬´ë£Œ/ìœ ë£Œ ì ‘ê·¼ ì œì–´ ë¡œì§

### 8.1 ë¬´ë£Œ ê²½ê¸° ì—´ëŒ ë¡œì§

```
1. ì‚¬ìš©ìê°€ ê²½ê¸° ìƒì„¸ ì§„ì…
2. IF í”„ë¦¬ë¯¸ì—„ íšŒì› â†’ ì „ì²´ ì—´ëŒ
3. IF ë¬´ë£Œ íšŒì›:
   a. profiles.free_race_date == today AND free_race_id != null
      â†’ ì´ë¯¸ ë¬´ë£Œ ê²½ê¸° ì‚¬ìš©í•¨
      â†’ free_race_id == í˜„ì¬ ê²½ê¸° â†’ ì—´ëŒ í—ˆìš©
      â†’ free_race_id != í˜„ì¬ ê²½ê¸° â†’ ë¸”ëŸ¬ + CTA
   b. profiles.free_race_date != today
      â†’ ì²« ì—´ëŒ â†’ free_race_date = today, free_race_id = í˜„ì¬ ê²½ê¸°
      â†’ ì—´ëŒ í—ˆìš©
```

### 8.2 ë¸”ëŸ¬ ì²˜ë¦¬

- ì „ëµë³„ Top3 ê²°ê³¼ë¥¼ CSS blur(8px) + overlayë¡œ ê°€ë¦¼
- "í”„ë¦¬ë¯¸ì—„ êµ¬ë…ìœ¼ë¡œ ëª¨ë“  ê²½ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”" CTA ë²„íŠ¼
- CTA í´ë¦­ â†’ êµ¬ë… í˜ì´ì§€ ì´ë™

## 9. ê´€ë¦¬ì ê¸°ëŠ¥

ìµœì†Œí•œì˜ ìš´ì˜ ë„êµ¬:

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ë°ì´í„° ìˆ˜ì§‘ ìƒíƒœ** | sync-race-data ì„±ê³µ/ì‹¤íŒ¨ ë¡œê·¸, ìµœê·¼ ì‹¤í–‰ ì‹œê°„ |
| **ì „ëµ ìƒì„± ìƒíƒœ** | ê²½ê¸°ë³„ 4ê°œ ì „ëµ Top3 ìƒì„± ì—¬ë¶€ í™•ì¸ |
| **ë¬´ë£Œ ê²½ê¸° ì •ì±…** | ì˜¤ëŠ˜ ë¬´ë£Œ ê²½ê¸° ì´ìš©ì ìˆ˜, ì „í™˜ìœ¨ |
| **êµ¬ë… ìƒíƒœ** | Paddle ì›¹í›… ë¡œê·¸, í™œì„± êµ¬ë…ì ìˆ˜ |

## 10. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: MVP (í•µì‹¬ í”Œë¡œìš°)
1. Next.js í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • (Tailwind + shadcn/ui)
2. Supabase ìŠ¤í‚¤ë§ˆ ìƒì„± (í•µì‹¬ í…Œì´ë¸”)
3. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
4. í™ˆ í™”ë©´ (ì˜¤ëŠ˜ ê²½ê¸° ë¦¬ìŠ¤íŠ¸)
5. ê²½ê¸° ìƒì„¸ (ì „ëµë³„ Top3 í‘œì‹œ)
6. ë¬´ë£Œ/ìœ ë£Œ ì ‘ê·¼ ì œí•œ (ë¸”ëŸ¬ ì²˜ë¦¬)

### Phase 2: ê²°ì œ + ë‚˜ë§Œì˜ í”½
7. Paddle êµ¬ë… ì—°ë™
8. ë‚˜ë§Œì˜ í”½ ê¸°ëŠ¥
9. í”„ë¦¬ì…‹ ì €ì¥

### Phase 3: ë°ì´í„° íŒŒì´í”„ë¼ì¸
10. ë§ˆì‚¬íšŒ ë°ì´í„° ìˆ˜ì§‘ Edge Function
11. ì „ëµë³„ ì ìˆ˜ ì‚°ì • Edge Function
12. Cron ìŠ¤ì¼€ì¤„ë§

### Phase 4: ê´€ë¦¬ì + í´ë¦¬ì‹±
13. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
14. ì—ëŸ¬ í•¸ë“¤ë§ / ë¡œë”© ìƒíƒœ
15. PWA ì„¤ì • (ì„ íƒ)

## 11. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ê¸°ì¤€ |
|------|------|
| **ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸** | 320px ~ 430px ê¸°ì¤€ ì„¤ê³„, ë°ìŠ¤í¬í†±ì€ max-width ì œí•œ |
| **ë¡œë”© ì†ë„** | í™ˆ FCP < 1.5s, ê²½ê¸° ìƒì„¸ LCP < 2s |
| **ì ‘ê·¼ì„±** | 50~60ëŒ€ íƒ€ê²Ÿ, ìµœì†Œ í°íŠ¸ 14px body, 16px ì£¼ìš” í…ìŠ¤íŠ¸ |
| **SEO** | ë©”íƒ€íƒœê·¸, OG íƒœê·¸ (ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ì‹œ ë¯¸ë¦¬ë³´ê¸°) |
| **ë³´ì•ˆ** | RLS ì •ì±…, JWT ê²€ì¦, Paddle ì›¹í›… ì„œëª… ê²€ì¦ |

## 12. ë°ì´í„° ì†ŒìŠ¤

| ë°ì´í„° | ì†ŒìŠ¤ | ìˆ˜ì§‘ ë°©ì‹ |
|--------|------|-----------|
| ê²½ê¸°/ì¶œì „ë§ˆ ì •ë³´ | ë§ˆì‚¬íšŒ ê³µê³µ API / í¬ë¡¤ë§ | ì¼ 1íšŒ Cron |
| ê²½ì£¼ ê²°ê³¼ | ë§ˆì‚¬íšŒ ê³µê³µ API | ê²½ê¸° ì¢…ë£Œ í›„ |
| ë§ ê±´ê°• ë°ì´í„° | ë§ˆì‚¬íšŒ ê³µê°œ ì •ë³´ | ì²´ì¤‘/í›ˆë ¨ ê¸°ë¡ |
| ê¸°ìˆ˜ ì •ë³´ | ë§ˆì‚¬íšŒ ê³µê°œ ì •ë³´ | ì£¼ê¸°ì  ê°±ì‹  |

## 13. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

| ë¦¬ìŠ¤í¬ | ëŒ€ì‘ |
|--------|------|
| ë§ˆì‚¬íšŒ ë°ì´í„° ì ‘ê·¼ ì°¨ë‹¨ | ê³µê³µë°ì´í„°í¬í„¸ API ëŒ€ì•ˆ, í¬ë¡¤ë§ ë°±ì—… |
| Paddle í•œêµ­ ê²°ì œ ì´ìŠˆ | ì¹´ì¹´ì˜¤í˜ì´/í† ìŠ¤ ê²°ì œ ë°±ì—… ê²€í†  |
| ì „ëµ ì •í™•ë„ ë‚®ìŒ | "ì°¸ê³ ìš©" ë©´ì±… ë¬¸êµ¬, ì ì¤‘ë¥  í†µê³„ íˆ¬ëª… ê³µê°œ |
| ì‚¬ìš©ì ì´íƒˆ | ë¬´ë£Œ 1ê²½ê¸° ì •ì±…ìœ¼ë¡œ ê°€ì¹˜ ì²´í—˜ ìœ ë„ |

---

**ì‘ì„±ì¼**: 2026-02-28
**ìƒíƒœ**: Draft
**ë‹¤ìŒ ë‹¨ê³„**: Design ë¬¸ì„œ ì‘ì„± (`/tokit design horse-lab`)
